\documentclass[11pt,a4]{article}

\usepackage[margin=2cm]{geometry}

\usepackage{amsmath}
\usepackage{url}

\usepackage{amsmath}
\usepackage{url}

\usepackage[utf8]{inputenc}

% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{10} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{10}  % for normal

% Custom colors
\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

\usepackage{listings}

% Python style for highlighting
\newcommand\pythonstyle{\lstset{
language=Python,
basicstyle=\ttm,
otherkeywords={self},             % Add keywords here
keywordstyle=\ttb\color{deepblue},
emph={MyClass,__init__},          % Custom highlighting
emphstyle=\ttb\color{deepred},    % Custom highlighting style
stringstyle=\color{deepgreen},
frame=tb,                         % Any extra options here
showstringspaces=false            % 
}}


% Python environment
\lstnewenvironment{python}[1][]
{
\pythonstyle
\lstset{#1}
}
{}

% Python for external files
\newcommand\pythonexternal[2][]{{
\pythonstyle
\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}


\usepackage{collectbox}

\newcommand{\mybox}[2]{$\quad$\fbox{
\begin{minipage}{#1cm}
\hfill\vspace{#2cm}
\end{minipage}
}}


\usepackage{fancyhdr}
\pagestyle{fancy}
\rhead{Programmazione 1 - Esercitazione 7}

\include{book_header}

\begin{document}
\thispagestyle{empty}
\hrule
\begin{center}
   {\Large {\bf Programmazione 1 \hspace{3cm} $\quad \quad \quad$ Esercitazione 7}}
\end{center}
{\bf Cognome: }\hspace{2.5cm} {\bf Nome: } \hspace{2.5cm} {\bf Matricola: } \\\
\hrule

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{}
Questa è la prima di due esercitazioni che vi guideranno alla scrittura di un programma che possa fare delle semplici previsioni
sui voti che un utente potrebbe dare a dei film che non ha ancora valutato.

L'obiettivo didattico dell'esercitazione è di far pratica nello scrivere programmi per la lettura di file di testo, 
nella costruzione di liste di liste o tuple, e nell'uso di dizionari. Si consiglia pertanto di ripassare
il contenuto del notebook Lab 10.

Per questa esercitazione si devono usare i seguenti file di testo (i dati sono reali):
\begin{enumerate}
\item {\tt u.user}: contiene le informazioni sugli utenti.
\item {\tt u.item}: contiene le informazioni sui film.
\item {\tt u1.base}: contiene le valutazioni degli utenti ai film, su una scala da 1 a 5. 
\end{enumerate}

L'esercitazione va svolta andando completare il codice per le funzioni contenute nel file {\tt Testing\_es\_7.py} disponibile sul sito. Gli esercizi da svolgere in ordine sono:

\begin{enumerate}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt ParseUsers(filename)} che legge il file di testo chiamato {\tt filename}
e restituisce una lista di tuple, in cui ogni tupla contiene le informazioni di un utente.
Il file di input contiene una riga per ogni utente con le informazioni seguenti:
\begin{center}
{\tt user id | age | gender | occupation | zip code}
\end{center}

\mybox{15}{2}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt CountGender(Ls)} che prende in input la lista di tuple {\tt Ls}
contenente le informazioni degli utenti e conta il numero di utenti per ogni {\it gender}.

Il risultato dovrebbe essere 273 utenti di sesso femminile e 670 di sesso maschile.

\mybox{15}{2}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt CountOccupation(Ls)} che prende in input la lista di tuple {\tt Ls}
contenente le informazioni degli utenti e conta il numero di utenti per ogni tipo di occupazione.
Il conteggio viene memorizzato in un dizionario in cui la chiave è il tipo di occupazione, mentre il valore
è il rispettivo numero di utenti.

\mybox{15}{2.5}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt CountAge(Ls)} che prende in input la lista di tuple {\tt Ls}
contenente le informazioni degli utenti e conta il numero di utenti per le seguenti fasce di età:
$(x<18, 18\leq x <25, 25 \leq x < 40, 40 \leq x < 65, x > 65)$. La funzione deve restituire una lista
con i valori per le relative fasce di età.

\mybox{15}{2.5}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt ParseFilm(filename)} che legge il file {\tt filename}
e restituisce un dizionario, in cui ogni chiave è l'id di un film e il rispettivo valore 
è lista con le informazioni sul film.
Il file di input contiene una riga per ogni film, e ogni riga contiene in ordine le informazioni seguenti:
\begin{center}
{\tt movie id|movie title|release date|video release date|IMDb URL|unknown|Action|
Adventure|Animation|Children's|Comedy|Crime|Documentary|Drama|Fantasy|Film-Noir|
Horror|Musical|Mystery|Romance|Sci-Fi|Thriller|War|Western}
\end{center}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt CountItem(Fs, i):} che prende in input un dizionario {\tt Fs} come
restituito dalla funzione precedente, e un indice {\tt i}>5, e conta il numero di film con il genere
corrispondente all'$i$-esimo elemento della lista che descrive un film. Per esempio,
il numero di film thriller è 251.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt CountYears(Fs):} che prende in input un dizionario {\tt Fs} come
restituito dalla funzione precedente, e conta il numero di film usciti in ogni anno. Per contare l'anno,
si deve elaborare il campo {\tt release date} estraendone l'anno (si consiglia di usare la funzione {\tt split}).
Per esempio, si dovrebbe ottenere che nel 1996 sono usciti 355 film.

\mybox{15}{2}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt ParseRating(filename)} che legge il file {\tt filename}
e restituisce una lista di liste, una per ogni rating.
Il file di input contiene le informazioni seguenti:
\begin{center}
{\tt user id | item id | rating | timestamp}
\end{center}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt CountFiled(Ls, i)} che prende in input una lista di rating
e un indice i < 3, e per ogni elemento della lista conta il numero di occorrenze diverse.
Questa funzione può essere usata per contare il numero di volte che ciascun voto è stato dato
(usata con $i=2$), il numero di voti dati da ciascun utente ($i=0$), oppure il numero
di voti ricevuti da ciascun film ($i=1$).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\item Scrivere una funzione {\tt PrintTopFilm(Ds, top, Ts)} che prende in input un
dizionario che ha una chiave per ogni film con il valore del numero di voti ricevuti,
un numero intero {\tt top}, e il dizionario che mappa ogni id di un film nelle sua lista di informazioni,
e stampi a video il titolo e il numero di valutazioni per i primi {\tt top} film più votati.

\mybox{15}{2}

\end{enumerate}

\end{document}
